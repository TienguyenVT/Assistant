<!DOCTYPE html>
<html lang="vi">
<head>
    <!-- Basic meta tags for character encoding and responsive viewport -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trá»£ lÃ½ áº£o cÃ¡ nhÃ¢n thÃ´ng minh há»— trá»£ quáº£n lÃ½ thá»i gian vÃ  cÃ´ng viá»‡c">
    <title>Trá»£ LÃ½ áº¢o CÃ¡ NhÃ¢n</title>
    
    <!-- CSS stylesheets -->
    <!-- Main styles -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- Feature-specific styles -->
    <link rel="stylesheet" href="css/timer.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/schedule.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/input.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/news.css">
    <link rel="stylesheet" href="css/model-settings.css">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Preload critical JavaScript modules for better performance -->
    <link rel="modulepreload" href="js/config.js" as="script" crossorigin="anonymous">
    <link rel="modulepreload" href="js/utils.js" as="script" crossorigin="anonymous">
</head>

<body>
    <!-- Left sidebar navigation panel -->
    <aside class="sidebar" id="sidebar">
        <!-- Main feature navigation buttons -->
        <nav class="sidebar-buttons">
            <!-- AI Model Settings Button -->
            <button data-function="model-settings" onclick="showModelSettings()" aria-label="CÃ i Ä‘áº·t mÃ´ hÃ¬nh AI">
                <span class="icon" aria-hidden="true">ğŸ¤–</span>
                <span class="button-text">CÃ i Äáº·t MÃ´ HÃ¬nh</span>
            </button>
            <!-- Schedule Creation Button -->
            <button data-function="schedule" onclick="createSchedule()" aria-label="Táº¡o lá»‹ch trÃ¬nh má»›i">
                <span class="icon" aria-hidden="true">ğŸ“</span>
                <span class="button-text">Láº­p Thá»i KhÃ³a Biá»ƒu</span>
            </button>
            <!-- Timer Button -->
            <button data-function="timer" onclick="showTimerModal()" aria-label="Thiáº¿t láº­p háº¹n giá»">
                <span class="icon" aria-hidden="true">â°</span>
                <span class="button-text">Háº¹n Giá» / Äáº¿m NgÆ°á»£c</span>
            </button>
            <!-- News Button -->
            <button data-function="news" onclick="showNews()" aria-label="Xem tin tá»©c má»›i nháº¥t">
                <span class="icon" aria-hidden="true">ğŸ“°</span>
                <span class="button-text">Tin Tá»©c</span>
            </button>
            <!-- New Chat Button -->
            <button data-function="newchat" onclick="newChat()" aria-label="Báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n má»›i">
                <span class="icon" aria-hidden="true">ğŸ’¬</span>
                <span class="button-text">Äoáº¡n Chat Má»›i</span>
            </button>
        </nav>
        
        <!-- Authentication section -->
        <div class="sidebar-auth-buttons">
            <!-- Buttons for non-authenticated users -->
            <div class="guest-buttons" id="guestButtons">
                <button class="login-button" onclick="showLoginModal()" aria-label="ÄÄƒng nháº­p vÃ o tÃ i khoáº£n">
                    <span class="icon" aria-hidden="true">ğŸ”‘</span>
                    <span class="button-text">ÄÄƒng Nháº­p</span>
                </button>
                <button class="register-button" onclick="showRegisterModal()" aria-label="ÄÄƒng kÃ½ tÃ i khoáº£n má»›i">
                    <span class="icon" aria-hidden="true">ğŸ“</span>
                    <span class="button-text">ÄÄƒng KÃ½</span>
                </button>
            </div>
            <!-- Buttons for authenticated users -->
            <div class="user-buttons" id="userButtons">
                <button class="account-button" onclick="showAccountModal()" aria-label="Quáº£n lÃ½ tÃ i khoáº£n">
                    <span class="icon" aria-hidden="true">ğŸ‘¤</span>
                    <span class="button-text">TÃ i Khoáº£n</span>
                </button>
                <button class="logout-button" onclick="handleLogout()" aria-label="ÄÄƒng xuáº¥t">
                    <span class="icon" aria-hidden="true">ğŸšª</span>
                    <span class="button-text">ÄÄƒng Xuáº¥t</span>
                </button>
            </div>
        </div>
        <!-- Container for timer notifications -->
        <div class="timer-notifications-sidebar" id="timer-notifications-sidebar"></div>
    </aside>
    
    <!-- Toggle button for sidebar -->
    <button class="toggle-sidebar" id="toggle-sidebar" aria-label="Thu gá»n/Má»Ÿ rá»™ng thanh bÃªn">
        <span class="arrow" aria-hidden="true">â–¶</span>
    </button>
    
    <!-- Main content section -->
    <main class="main-content" id="main-content">
        <h1>Trá»£ LÃ½ AI</h1>
        
        <!-- Chat history display area -->
        <div class="chat-container" id="chat-container" role="log" aria-label="Lá»‹ch sá»­ trÃ² chuyá»‡n"></div>
        
        <!-- User input section -->
        <div id="input-container">
            <input 
                type="text" 
                id="user-input" 
                placeholder="Nháº­p cÃ¢u há»i hoáº·c yÃªu cáº§u cá»§a báº¡n..."
                aria-label="Nháº­p tin nháº¯n"
                autocomplete="off">
            <button id="stop-button" aria-label="Dá»«ng pháº£n há»“i">
                <i class="material-icons">stop</i>
            
            </button>
            <button id="send-button" aria-label="Gá»­i tin nháº¯n">
                <i class="material-icons">send</i>
                
            </button>
        </div>
    </main>
    
    <!-- Core JavaScript initialization -->
    <script type="module">
        // Import authentication related functions
        import { 
            showLoginModal, 
            showRegisterModal, 
            showAccountModal, 
            handleLogout,
            checkAuthState
        } from './js/auth.js';
        
        // Import feature-specific functions
        import { showTimerModal } from './js/timer.js';
        import { showNews } from './js/news.js';
        import { createSchedule } from './js/schedule.js';
        import { newChat, sendMessage } from './js/chat.js';
        import { showModelSettings } from './js/model-settings.js';
        
        // Assign functions to window object for HTML onclick access
        window.showLoginModal = showLoginModal;
        window.showRegisterModal = showRegisterModal;
        window.showAccountModal = showAccountModal;
        window.handleLogout = handleLogout;
        window.showTimerModal = showTimerModal;
        window.showNews = showNews;
        window.createSchedule = createSchedule;
        window.newChat = newChat;
        window.sendMessage = sendMessage;
        window.showModelSettings = showModelSettings;
        
        // Event listeners
        document.getElementById('send-button').addEventListener('click', sendMessage);
        document.getElementById('user-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        // Check authentication state on page load
        checkAuthState();
    </script>

    <!-- Load configuration first -->
    <script type="module" src="js/config.js"></script>

    <!-- Load other modules -->
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/sidebar.js"></script>
    <script type="module" src="js/chat.js"></script>
    <script type="module" src="js/timer.js"></script>
    <script type="module" src="js/schedule.js"></script>
    <script type="module" src="js/news.js"></script>
    <script type="module" src="js/model-settings.js"></script>
</body>
</html>
